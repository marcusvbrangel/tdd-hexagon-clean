{
  "uid": "retail-store-business-kpis",
  "title": "Retail Store - Business KPIs",
  "timezone": "browser",
  "schemaVersion": 39,
  "version": 1,
  "refresh": "10s",
  "tags": [
    "retail-store",
    "kpi",
    "business"
  ],
  "time": {
    "from": "now-15m",
    "to": "now"
  },
  "templating": {
    "list": []
  },
  "panels": [
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 1,
      "title": "Orders placed rate",
      "gridPos": {
        "x": 0,
        "y": 0,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_orders_total{event=\"order.placed\"}[5m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 2,
      "title": "Orders completed rate",
      "gridPos": {
        "x": 8,
        "y": 0,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_orders_total{event=\"order.completed\"}[5m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 3,
      "title": "Orders canceled rate",
      "gridPos": {
        "x": 16,
        "y": 0,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_orders_total{event=\"order.canceled\"}[5m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 4,
      "title": "Order conversion %",
      "gridPos": {
        "x": 0,
        "y": 8,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_orders_total{event=\"order.completed\"}[5m])) / sum(rate(business_orders_total{event=\"order.placed\"}[5m])) * 100",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 5,
      "title": "Gross order value rate",
      "gridPos": {
        "x": 8,
        "y": 8,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum by (currency) (rate(business_order_value_sum[5m]))",
          "refId": "A",
          "legendFormat": "{{currency}}"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 6,
      "title": "Average order value (AOV)",
      "gridPos": {
        "x": 16,
        "y": 8,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_order_value_sum[5m])) / sum(rate(business_order_value_count[5m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 7,
      "title": "Items per order (avg)",
      "gridPos": {
        "x": 0,
        "y": 16,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_order_items_sum[5m])) / sum(rate(business_order_items_count[5m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 8,
      "title": "Payment authorization success %",
      "gridPos": {
        "x": 8,
        "y": 16,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_payments_total{event=\"payment.authorized\"}[5m])) / sum(rate(business_payments_total{event=~\"payment.authorized|payment.declined\"}[5m])) * 100",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 9,
      "title": "Payment capture success %",
      "gridPos": {
        "x": 16,
        "y": 16,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_payments_total{event=\"payment.captured\"}[5m])) / sum(rate(business_payments_total{event=~\"payment.captured|payment.capture_failed|payment.failed\"}[5m])) * 100",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 10,
      "title": "Inventory reserve success %",
      "gridPos": {
        "x": 0,
        "y": 24,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_inventory_total{event=\"inventory.reserved\"}[5m])) / sum(rate(business_inventory_total{event=~\"inventory.reserved|inventory.rejected\"}[5m])) * 100",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 11,
      "title": "Inventory commit rate %",
      "gridPos": {
        "x": 8,
        "y": 24,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_inventory_total{event=\"inventory.committed\"}[5m])) / sum(rate(business_inventory_total{event=~\"inventory.committed|inventory.released\"}[5m])) * 100",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 12,
      "title": "Items reserved rate",
      "gridPos": {
        "x": 16,
        "y": 24,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_inventory_items_sum[5m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 13,
      "title": "Payment method mix",
      "gridPos": {
        "x": 0,
        "y": 32,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum by (payment_method) (rate(business_checkout_orders_total[5m]))",
          "refId": "A",
          "legendFormat": "{{payment_method}}"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 14,
      "title": "Discount usage %",
      "gridPos": {
        "x": 8,
        "y": 32,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_checkout_orders_total{discounted=\"true\"}[5m])) / sum(rate(business_checkout_orders_total[5m])) * 100",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 15,
      "title": "Discount value rate",
      "gridPos": {
        "x": 16,
        "y": 32,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum by (currency) (rate(business_order_discount_value_sum[5m]))",
          "refId": "A",
          "legendFormat": "{{currency}}"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 16,
      "title": "Discounted orders rate",
      "gridPos": {
        "x": 0,
        "y": 40,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_checkout_orders_total{discounted=\"true\"}[5m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 17,
      "title": "Average discount value",
      "gridPos": {
        "x": 8,
        "y": 40,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum(rate(business_order_discount_value_sum[5m])) / sum(rate(business_order_discount_value_count[5m]))",
          "refId": "A"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 18,
      "title": "Saga outcomes rate",
      "gridPos": {
        "x": 16,
        "y": 40,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum by (outcome) (rate(business_saga_outcomes_total[5m]))",
          "refId": "A",
          "legendFormat": "{{outcome}}"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 19,
      "title": "Saga cancel reasons rate",
      "gridPos": {
        "x": 0,
        "y": 48,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum by (reason) (rate(business_saga_outcomes_total{outcome=\"canceled\"}[5m]))",
          "refId": "A",
          "legendFormat": "{{reason}}"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 20,
      "title": "Saga timeouts rate",
      "gridPos": {
        "x": 8,
        "y": 48,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum by (step) (rate(business_saga_timeouts_total[5m]))",
          "refId": "A",
          "legendFormat": "{{step}}"
        }
      ]
    },
    {
      "type": "timeseries",
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ops"
        },
        "overrides": []
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        },
        "tooltip": {
          "mode": "single"
        },
        "stacking": {
          "mode": "none"
        }
      },
      "id": 21,
      "title": "Saga retries rate",
      "gridPos": {
        "x": 16,
        "y": 48,
        "w": 8,
        "h": 8
      },
      "targets": [
        {
          "expr": "sum by (step) (rate(business_saga_retries_total[5m]))",
          "refId": "A",
          "legendFormat": "{{step}}"
        }
      ]
    }
  ]
}
