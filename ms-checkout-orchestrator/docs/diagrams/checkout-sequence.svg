<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="920" viewBox="0 0 1400 920">
<defs>
<marker id="arrow" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
<polygon points="0 0, 12 4, 0 8" fill="#333333" />
</marker>
</defs>
<rect x="0" y="0" width="1400" height="920" fill="#ffffff" />
<rect x="10" y="30" width="180" height="50" fill="#f5f5f5" stroke="#333333" stroke-width="2" />
<text x="100" y="62" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#111111"><tspan x="100" dy="0">ms-order</tspan></text>
<line x1="100" y1="90" x2="100" y2="880" stroke="#999999" stroke-width="1" stroke-dasharray="6 6" />
<rect x="230" y="30" width="180" height="50" fill="#f5f5f5" stroke="#333333" stroke-width="2" />
<text x="320" y="62" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#111111"><tspan x="320" dy="0">Kafka events</tspan></text>
<line x1="320" y1="90" x2="320" y2="880" stroke="#999999" stroke-width="1" stroke-dasharray="6 6" />
<rect x="450" y="30" width="180" height="50" fill="#f5f5f5" stroke="#333333" stroke-width="2" />
<text x="540" y="62" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#111111"><tspan x="540" dy="0">Orchestrator</tspan></text>
<line x1="540" y1="90" x2="540" y2="880" stroke="#999999" stroke-width="1" stroke-dasharray="6 6" />
<rect x="670" y="30" width="180" height="50" fill="#f5f5f5" stroke="#333333" stroke-width="2" />
<text x="760" y="62" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#111111"><tspan x="760" dy="0">Postgres + Outbox</tspan></text>
<line x1="760" y1="90" x2="760" y2="880" stroke="#999999" stroke-width="1" stroke-dasharray="6 6" />
<rect x="910" y="30" width="180" height="50" fill="#f5f5f5" stroke="#333333" stroke-width="2" />
<text x="1000" y="62" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#111111"><tspan x="1000" dy="0">Kafka commands</tspan></text>
<line x1="1000" y1="90" x2="1000" y2="880" stroke="#999999" stroke-width="1" stroke-dasharray="6 6" />
<rect x="1150" y="30" width="180" height="50" fill="#f5f5f5" stroke="#333333" stroke-width="2" />
<text x="1240" y="62" font-family="Arial, Helvetica, sans-serif" font-size="12" text-anchor="middle" fill="#111111"><tspan x="1240" dy="0">Downstream services</tspan></text>
<line x1="1240" y1="90" x2="1240" y2="880" stroke="#999999" stroke-width="1" stroke-dasharray="6 6" />
<line x1="100" y1="120" x2="320" y2="120" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="210.0" y="112" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="210.0" dy="0">order.placed</tspan></text>
<line x1="320" y1="160" x2="540" y2="160" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="430.0" y="152" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="430.0" dy="0">consume order.placed</tspan></text>
<line x1="540" y1="200" x2="760" y2="200" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="650.0" y="192" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="650.0" dy="0">save saga + outbox inventory.reserve</tspan></text>
<line x1="760" y1="240" x2="1000" y2="240" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="880.0" y="232" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="880.0" dy="0">outbox relay publish inventory.reserve</tspan></text>
<line x1="1000" y1="280" x2="1240" y2="280" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="1120.0" y="272" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="1120.0" dy="0">inventory.reserve (inventory)</tspan></text>
<line x1="1240" y1="320" x2="320" y2="320" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="780.0" y="312" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="780.0" dy="0">inventory.reserved</tspan></text>
<line x1="320" y1="360" x2="540" y2="360" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="430.0" y="352" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="430.0" dy="0">consume inventory.reserved</tspan></text>
<line x1="540" y1="400" x2="760" y2="400" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="650.0" y="392" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="650.0" dy="0">update saga + outbox payment.authorize</tspan></text>
<line x1="760" y1="440" x2="1000" y2="440" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="880.0" y="432" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="880.0" dy="0">outbox relay publish payment.authorize</tspan></text>
<line x1="1000" y1="480" x2="1240" y2="480" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="1120.0" y="472" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="1120.0" dy="0">payment.authorize (payment)</tspan></text>
<line x1="1240" y1="520" x2="320" y2="520" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="780.0" y="512" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="780.0" dy="0">payment.authorized</tspan></text>
<line x1="320" y1="560" x2="540" y2="560" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="430.0" y="552" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="430.0" dy="0">consume payment.authorized</tspan></text>
<line x1="540" y1="600" x2="760" y2="600" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="650.0" y="592" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="650.0" dy="0">update saga + outbox order.complete</tspan></text>
<line x1="760" y1="640" x2="1000" y2="640" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="880.0" y="632" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="880.0" dy="0">outbox relay publish order.complete</tspan></text>
<line x1="1000" y1="680" x2="1240" y2="680" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="1120.0" y="672" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="1120.0" dy="0">order.complete (order)</tspan></text>
<line x1="1240" y1="720" x2="320" y2="720" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="780.0" y="712" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="780.0" dy="0">order.completed</tspan></text>
<line x1="320" y1="760" x2="540" y2="760" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
<text x="430.0" y="752" font-family="Arial, Helvetica, sans-serif" font-size="11" text-anchor="middle" fill="#111111"><tspan x="430.0" dy="0">consume order.completed + complete saga</tspan></text>
</svg>