<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="820" viewBox="0 0 1400 820">
  <defs>
    <marker id="arrow" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto" markerUnits="strokeWidth">
      <polygon points="0 0, 12 4, 0 8" fill="#333333" />
    </marker>
  </defs>

  <rect x="0" y="0" width="1400" height="820" fill="#ffffff" />

  <!-- Left: Kafka events -->
  <rect x="40" y="160" width="260" height="240" rx="8" fill="#f5f5f5" stroke="#333333" stroke-width="2" />
  <text x="170" y="190" font-family="Arial, Helvetica, sans-serif" font-size="16" text-anchor="middle" fill="#111111">
    <tspan x="170" dy="0">Kafka events</tspan>
    <tspan x="170" dy="22">order.events.v1</tspan>
    <tspan x="170" dy="22">inventory.events.v1</tspan>
    <tspan x="170" dy="22">payment.events.v1</tspan>
  </text>

  <!-- Right: Kafka commands -->
  <rect x="1100" y="160" width="260" height="240" rx="8" fill="#f5f5f5" stroke="#333333" stroke-width="2" />
  <text x="1230" y="190" font-family="Arial, Helvetica, sans-serif" font-size="16" text-anchor="middle" fill="#111111">
    <tspan x="1230" dy="0">Kafka commands</tspan>
    <tspan x="1230" dy="22">inventory.commands.v1</tspan>
    <tspan x="1230" dy="22">payment.commands.v1</tspan>
    <tspan x="1230" dy="22">order.commands.v1</tspan>
  </text>

  <!-- Container: microservice -->
  <rect x="330" y="60" width="740" height="640" rx="12" fill="#eef4ff" stroke="#2f4a6d" stroke-width="2" />
  <text x="350" y="95" font-family="Arial, Helvetica, sans-serif" font-size="20" font-weight="bold" fill="#1f2d3d">ms-checkout-orchestrator</text>

  <!-- Inside boxes -->
  <rect x="360" y="140" width="250" height="70" rx="8" fill="#ffffff" stroke="#333333" stroke-width="2" />
  <text x="485" y="180" font-family="Arial, Helvetica, sans-serif" font-size="14" text-anchor="middle" fill="#111111">CheckoutEventsConsumer</text>

  <rect x="760" y="140" width="250" height="70" rx="8" fill="#ffffff" stroke="#333333" stroke-width="2" />
  <text x="885" y="170" font-family="Arial, Helvetica, sans-serif" font-size="14" text-anchor="middle" fill="#111111">CheckoutSagaTimeout</text>
  <text x="885" y="190" font-family="Arial, Helvetica, sans-serif" font-size="14" text-anchor="middle" fill="#111111">Scheduler</text>

  <rect x="560" y="240" width="250" height="70" rx="8" fill="#ffffff" stroke="#333333" stroke-width="2" />
  <text x="685" y="280" font-family="Arial, Helvetica, sans-serif" font-size="14" text-anchor="middle" fill="#111111">CheckoutSagaEngine</text>

  <rect x="360" y="340" width="250" height="70" rx="8" fill="#ffffff" stroke="#333333" stroke-width="2" />
  <text x="485" y="365" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#111111">CheckoutSagaRepository</text>
  <text x="485" y="385" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#111111">(Postgres)</text>

  <rect x="760" y="340" width="250" height="70" rx="8" fill="#ffffff" stroke="#333333" stroke-width="2" />
  <text x="885" y="365" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#111111">ProcessedEvents</text>
  <text x="885" y="385" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#111111">(idempotency)</text>

  <rect x="560" y="440" width="250" height="70" rx="8" fill="#ffffff" stroke="#333333" stroke-width="2" />
  <text x="685" y="465" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#111111">Outbox</text>
  <text x="685" y="485" font-family="Arial, Helvetica, sans-serif" font-size="13" text-anchor="middle" fill="#111111">(commands)</text>

  <rect x="560" y="530" width="250" height="70" rx="8" fill="#ffffff" stroke="#333333" stroke-width="2" />
  <text x="685" y="570" font-family="Arial, Helvetica, sans-serif" font-size="14" text-anchor="middle" fill="#111111">OutboxRelay</text>

  <!-- Arrows -->
  <line x1="300" y1="280" x2="360" y2="175" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="485" y1="210" x2="685" y2="240" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="885" y1="210" x2="685" y2="240" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="685" y1="310" x2="485" y2="340" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="685" y1="310" x2="885" y2="340" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="685" y1="310" x2="685" y2="440" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="685" y1="510" x2="685" y2="530" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
  <line x1="810" y1="565" x2="1100" y2="280" stroke="#333333" stroke-width="2" marker-end="url(#arrow)" />
</svg>
